<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>    

<%@ include file="../includes/header.jsp" %>
	<style>
		.btn-primary{background:orange;border:orange !important;}
	</style>

	<div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Board</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    
    <div class="row">
         <div class="col-lg-12">
             <div class="panel panel-default">
                 <div class="panel-heading">
                     Read
                 </div>
                 <!-- /.panel-heading -->
                 <div class="panel-body">
                    <div class="form-group">
                    	<lable>no</lable>
                    	<input class="form-control" name="bno" value='<c:out value="${board.bno}"/>' readonly>
                    </div> 
                   	<div class="form-group">
                   		<label>Title</label>
                   		<input class="form-control" name="title" value='<c:out value="${board.title}"/>' readonly>
                   	</div>
                   	<div class="form-group">
                   		<label>Content</label>
                   		<textarea class="form-control" rows="10" name="content" readonly><c:out value="${board.content}"/></textarea>
                   	</div>
                   	<div class="form-group">
                   		<label>Writer</label>
                   		<input class="form-control" name="writer" value='<c:out value="${board.writer}"/>' readonly>
                   	</div>
                   	<button data-oper="modify" class="btn btn-default btn-primary">Modify</button>
                   	<button data-oper="list" class="btn btn-default btn-primary">List</button>
                   	
                   	<form id="operForm" action="/board/modify" method="get">
                   		<input type="hidden" id="bno" name="bno" value='<c:out value="${board.bno}"/>'>
                   	</form>
                    
                 </div>
                 <!-- /.panel-body -->
             </div>
             <!-- /.panel -->
         </div>
         <!-- /.col-lg-12 -->
     </div>
     
    <!-- 댓글 목록------------------------------------------------------>     
    <div class="row">
    	
    	<div class="col-lg-12">
    		<div class="panel panel-default">
    			<div class="panel-heading">
    				<i class="fa fa-comments fa-fw"></i> Reply
    				<button id="addReplyBtn" class="btn btn-primary btn-xs pull-right">New Reply</button>
    			</div>
    			<div class="panel-body">
    				<ul class="chat">
    					<!-- 이 자리에 댓글 목록이 들어감 -->
    				</ul>
    			</div>
    			<div class="panel-footer"></div>
    		</div>
    	</div>
    </div>
	<!-- 댓글 목록.end-------------------------------------------------->     
     
     
    
    <!-- 댓글 등록 modal-------------------------------------------------->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
        aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal"
                aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="myModalLabel">REPLY MODAL</h4>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label>Reply</label> 
                <input class="form-control" name='reply' value='New Reply!!!!'>
              </div>      
              <div class="form-group">
              	<label>Replyer</label> 
                <input class="form-control" name='replyer' value='replyer'>
              </div>
              <div class="form-group">
                <label>Reply Date</label> 
                <input class="form-control" name='replyDate' value='2018-01-01 13:13'>
              </div>
      
            </div>
			<div class="modal-footer">
		        <button id='modalModBtn' type="button" class="btn btn-warning">Modify</button>
		        <button id='modalRemoveBtn' type="button" class="btn btn-danger">Remove</button>
		        <button id='modalRegisterBtn' type="button" class="btn btn-primary">Register</button>
		        <button id='modalCloseBtn' type="button" class="btn btn-default">Close</button>
	      	</div>          
	      </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
     </div>
    
    <!-- 댓글 등록 modal.end-------------------------------------------------->
    
    <script type="text/javascript" src="/resources/js/reply.js"></script>
    
    
    <script>
    	$(document).ready(function(){
    		/*필요한 변수. 찾을 태그를 먼저 작성***********************************************/
    		var bnoValue='<c:out value="${board.bno}"/>'; // 부모글 번호
    		var replyUL=$(".chat"); // 댓글목록 ul
   		    var modal = $(".modal"); //모달창
		    var modalInputReply = modal.find("input[name='reply']"); // 댓글 내용
		    var modalInputReplyer = modal.find("input[name='replyer']"); // 댓글 작성자
		    var modalInputReplyDate = modal.find("input[name='replyDate']"); // 댓글 작성일
		    var modalModBtn = $("#modalModBtn"); // 수정 버튼
		    var modalRemoveBtn = $("#modalRemoveBtn"); // 삭제버튼
		    var modalRegisterBtn = $("#modalRegisterBtn"); // 등록버튼
    		
    		var operForm=$("#operForm");
    		/*modify 버튼 이벤트처리**********************************/
    		$("button[data-oper='modify']").on("click",function(){
    			operForm.attr("action","/board/modify").submit();
    		});
    		/*event 버튼 이벤트처리***********************************/
    		  $("button[data-oper='list']").on("click", function(e){
    			  operForm.find("#bno").remove();
    			  operForm.attr("action","/board/list")
    			  operForm.submit();
    		});  
    	});
    </script>



<%@ include file="../includes/footer.jsp" %>